<!DOCTYPE html>

<html>
<head>
<title>Soap Paste Dilution Calculator - PIPPS Smart Apps (Free Version)</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.5;
    margin: 0 auto;
    padding: 20px;
    max-width: 1100px;
    background-color: #f9f9f9;
    color: #333;
}
.app-header {
    text-align: center;
    margin-bottom: 15px;
}
.app-logo {
    max-height: 50px;
    width: auto;
    margin-bottom: 8px;
}
.app-brand {
    font-size: 1.0em;
    color: #555;
    font-weight: normal;
    margin-top: 0;
}

.short-instructions {
text-align: left; /\* Align text left for numbered list */
font-size: 0.9em;
margin-bottom: 15px;
background-color: #f0f8ff;
padding: 10px 15px; /* Adjusted padding */
border-radius: 4px;
border: 1px solid #d6eaff;
}
.short-instructions p { /* Use paragraphs for each line */
margin: 3px 0;
}
.short-instructions a {
color: #0056b3; /* Standard link color \*/
text-decoration: underline;
}
.short-instructions a\:hover {
color: #003d80;
}

.main-layout {
display: flex;
flex-wrap: wrap;
gap: 20px;
}

.calculator-main-column {
flex: 2;
min-width: 450px;
background-color: #fff;
padding: 20px;
border-radius: 8px;
box-shadow: 0 2px 10px rgba(0,0,0,0.07);
}

.summary-sidebar {
flex: 1;
min-width: 300px;
background-color: #f0f4f8;
padding: 20px;
border-radius: 8px;
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
align-self: flex-start;
position: sticky;
top: 20px;
height: fit-content;
}

.summary-sidebar h2 {
margin-top: 0;
font-size: 1.4em;
color: #2c3e50;
border-bottom: 1px solid #d4dde5;
padding-bottom: 8px;
}
.summary-sidebar p {
margin: 8px 0;
font-size: 0.95em;
display: flex;
justify-content: space-between;
}
.summary-sidebar p strong {
margin-right: 10px;
}
.summary-sidebar .calculated-value {
color: #16a085;
}
.summary-sidebar .total-final {
font-weight: bold;
font-size: 1.15em;
color: #2c3e50;
margin-top: 15px;
padding-top: 10px;
border-top: 1px solid #d4dde5;
}
.summary-sidebar hr {
border: 0;
height: 1px;
background-color: #d4dde5;
margin: 12px 0;
}

h1 {
text-align: center;
color: #2c3e50;
margin-top:0;
margin-bottom: 10px;
font-size: 1.8em;
}

.calculator-main-column h2 {
text-align: left;
color: #2c3e50;
margin-top: 15px;
margin-bottom: 10px;
font-size: 1.3em;
border-bottom: 1px solid #eee;
padding-bottom: 8px;
}

table {
width: 100%;
border-collapse: collapse;
margin-bottom: 10px;
}

th, td {
border: 1px solid #e0e0e0;
padding: 8px 10px;
text-align: left;
vertical-align: middle;
font-size: 0.95em;
}
th {
background-color: #f0f4f8;
font-weight: 600;
width: 55%;
}
td\:last-child {
width: 45%;
}
.instructional-note {
font-size: 0.85em;
font-style: italic;
color: #555;
display: block;
margin-top: 2px;
}

input\[type="number"] {
width: 80px;
padding: 6px;
border: 1px solid #ccc;
border-radius: 4px;
box-sizing: border-box;
font-size: 0.95em;
margin-right: 3px;
}
input\[type="checkbox"] {
margin-right: 5px;
vertical-align: middle;
}
.calculated-value {
font-weight: bold;
color: #27ae60;
padding: 6px 0;
}
.phase-button-container {
text-align: right;
margin-bottom: 20px;
}

.additive-row td\:last-child {
display: flex;
align-items: center;
justify-content: space-between;
}
.additive-row .calculated-value {
margin-left: 10px;
min-width: 50px;
text-align: right;
}

.user-guide {
background-color: #e7f3fe;
border-left: 4px solid #2196F3;
padding: 10px 12px;
margin-top: 20px;
margin-bottom: 20px;
border-radius: 4px;
font-size: 0.9em;
}
.user-guide h3 {
margin-top: 0;
margin-bottom: 5px;
color: #1a73e8;
font-size: 1.1em;
}
.user-guide p {
margin: 4px 0;
}

.buttons-container {
text-align: center;
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid #eee;
}
button {
background-color: #3498db;
color: white;
border: none;
padding: 10px 20px;
text-align: center;
text-decoration: none;
display: inline-block;
font-size: 0.95em;
border-radius: 5px;
cursor: pointer;
transition: background-color 0.3s ease;
margin: 5px;
}
button.phase-calc-button {
background-color: #27ae60;
}
button.phase-calc-button\:hover {
background-color: #229954;
}
button\:hover {
background-color: #2980b9;
}
\#printButton {
background-color: #95a5a6;
}
\#printButton\:hover {
background-color: #7f8c8d;
}

.disclaimer {
margin-top: 25px;
padding: 12px;
border: 1px dashed #ccc;
background-color: #fdfdfd;
font-size: 0.8em;
color: #444;
border-radius: 4px;
clear: both;
}
.disclaimer h4 {
margin-top: 0;
margin-bottom: 5px;
color: #d35400;
}
.disclaimer ul {
padding-left: 20px;
margin-top: 5px;
margin-bottom: 5px;
}
.disclaimer li {
margin-bottom: 3px;
}
.required-asterisk { color: red; margin-left: 2px; }

@media (max-width: 960px) {
.main-layout {
flex-direction: column;
}
.summary-sidebar {
width: 100%;
margin-top: 20px;
position: static;
box-sizing: border-box;
}
.calculator-main-column {
min-width: auto;
}
}

@media print {
body { font-size: 12pt; max-width: none; box-shadow: none;}
.app-header, .short-instructions, .user-guide, .buttons-container button#printButton, .phase-button-container button, h1, .calculator-main-column h2, .disclaimer, .summary-sidebar { display: none; }
.calculator-main-column { background-color: transparent; box-shadow: none; padding: 0; }
.main-layout { display: block; }
table, th, td { border: 1px solid #666; font-size: 10pt; padding: 5px;}
button { display\:none; }
} </style>

</head>
<body>

```
<div class="app-header">
    <img src="https://static.wixstatic.com/media/297e2c_219dd8a8a2004c38ae6baf48171cea73~mv2.png" alt="PIPPS Smart Apps Logo" class="app-logo">
    <h2 class="app-brand">PIPPS Smart Apps Presents:</h2>
</div>

<div class="main-layout">
    <div class="calculator-main-column">
        <h1>Soap Paste Dilution Calculator</h1>
        <div class="short-instructions">
            <p>1. Complete Phase 1 inputs & click 'Calculate Phase 1'.</p>
            <p>2. Add initial water to paste.</p>
            <p>3. Then, complete Phase 2 inputs & click 'Calculate Phase 2 & Additives'.</p>
            <p style="margin-top: 8px;">For a comprehensive guide on diluting soap paste, visit our <a href="https://jcepiphany.wixsite.com/resources/castile-soap-paste" target="_blank" rel="noopener noreferrer">Soap Paste to Liquid Guide</a>.</p>
        </div>

        <h2>Phase 1: Initial Dilution of Soap Paste</h2>
        <table>
          <tr>
            <th>Item <span class="required-asterisk">*</span></th>
            <th>Value (e.g., grams)</th>
          </tr>
          <tr>
            <td>Total weight of paste & its container
                <small class="instructional-note">(If container weight below is 0, this is your Net Soap Paste)</small>
            </td>
            <td><input type="number" id="totalWeight" data-phase="1" value="0" step="any" placeholder="e.g., 1500"></td>
          </tr>
          <tr>
            <td>Weight of container
                <small class="instructional-note">(Leave as 0 or empty if 'Total weight' above is already Net Soap Paste)</small>
            </td>
            <td><input type="number" id="containerWeight" data-phase="1" value="0" step="any" placeholder="e.g., 500"></td>
          </tr>
          <tr>
            <td><strong>Net Soap Paste (Calculated)</strong></td>
            <td id="totalPaste" class="calculated-value">0.00</td>
          </tr>
          <tr>
            <td>Desired Soap Strength (%)</td>
            <td><input type="number" id="soapStrength" data-phase="1" value="33" step="any" placeholder="e.g., 33"> %</td>
          </tr>
          <tr>
            <td><strong>Total Water needed for desired strength</strong></td>
            <td id="totalWater" class="calculated-value">0.00</td>
          </tr>
          <tr>
              <td>Initial water addition preference:</td>
              <td><input type="checkbox" id="addAllWater" data-phase="1"><label for="addAllWater">Add all water now (100%)</label></td>
          </tr>
          <tr>
            <td><strong>Water to add initially</strong> <span id="waterToAddPercentLabel">(80% of total water)</span></td>
            <td id="waterToAdd" class="calculated-value">0.00</td>
          </tr>
        </table>
        <div class="phase-button-container">
            <button onclick="calculatePhase1()" class="phase-calc-button">Calculate Phase 1</button>
        </div>

        <h2>Phase 2: Additives & Final Water Adjustment</h2>
        <table>
          <tr>
            <th>Item <span class="required-asterisk">*</span></th>
            <th>Value</th>
          </tr>
          <tr>
            <td>Total weight of diluted soap & its container <br><small>(after initial water from Phase 1 was added & dissolved)</small></td>
            <td><input type="number" id="postDilTotalWeight" data-phase="2" value="0" step="any" placeholder="e.g., 1800"></td>
          </tr>
          <tr>
            <td>Weight of the container (can be same or different)</td>
            <td><input type="number" id="postDilContainerWeight" data-phase="2" value="0" step="any" placeholder="e.g., 500"></td>
          </tr>
          <tr>
            <td><strong>Net Diluted Soap (Actual Measured)</strong></td>
            <td id="postDilTotalPasteWater" class="calculated-value">0.00</td>
          </tr>
          <tr>
            <td><strong>Remaining Water to Add</strong> <br><small>(to reach target dilution & for additives)</small></td>
            <td id="waterToAddPostDil" class="calculated-value">0.00</td>
          </tr>
          <tr class="additive-row">
            <td>Glycerin (%)</td>
            <td><input type="number" id="glycerinPercent" data-phase="2" value="0.53" step="any"> % <span id="glycerinAmount" class="calculated-value">0.00</span></td>
          </tr>
          <tr class="additive-row">
            <td>Preservative (%)</td>
            <td><input type="number" id="preservativePercent" data-phase="2" value="0.0075" step="any"> % <span id="preservativeAmount" class="calculated-value">0.0000</span></td>
          </tr>
          <tr class="additive-row">
            <td>Thickener (%)</td>
            <td><input type="number" id="thickenerPercent" data-phase="2" value="0.75" step="any"> % <span id="thickenerAmount" class="calculated-value">0.00</span></td>
          </tr>
          <tr class="additive-row">
            <td>Essential/Fragrance Oil (%)</td>
            <td><input type="number" id="fragrancePercent" data-phase="2" value="1" step="any"> % <span id="fragranceAmount" class="calculated-value">0.00</span></td>
          </tr>
        </table>
        <div class="phase-button-container">
            <button onclick="calculatePhase2()" class="phase-calc-button">Calculate Phase 2 & Additives</button>
        </div>

        <div class="user-guide">
          <h3>Quick Start Guide (Detailed)</h3>
          <p>All weights should be in the same unit (e.g., grams or ounces).</p>
          <p>1. <strong>Phase 1:</strong> Enter your "Total weight of paste & its container". If this value is already your Net Soap Paste, leave "Weight of container" as 0 or empty. Set your "Desired Soap Strength %". Choose if you want to add "all water now" or hold back 20%. Click "Calculate Phase 1".</p>
          <p>2. Add the "Water to add initially" to your soap paste and allow it to dissolve.</p>
          <p>3. <strong>Phase 2:</strong> Weigh your dissolved soap (including its container) and enter these values. Adjust percentages for any additives (Glycerin, Preservative, etc.). Click "Calculate Phase 2 & Additives".</p>
          <p>4. The "Remaining Water to Add" can be used to dissolve your additives before incorporating them or to top up your soap to the target dilution. Amounts for additives are also shown.</p>
          <p>5. The sidebar will show a running summary of key values.</p>
        </div>

        <div class="buttons-container">
            <button id="printButton" onclick="window.print()">Print Results</button>
            <button type="button" onclick="resetForm()">Reset All</button>
        </div>
    </div>

    <div class="summary-sidebar">
        <h2>Calculation Summary</h2>
        <p><strong>Target Net Soap Paste:</strong> <span id="summaryTotalPaste" class="calculated-value">0.00</span></p>
        <p><strong>Target Total Water:</strong> <span id="summaryTotalWater" class="calculated-value">0.00</span></p>
        <p><strong>Target Diluted Soap Wt.:</strong> <span id="summaryTargetDilutedSoap" class="calculated-value">0.00</span></p>
        <hr>
        <p><strong>Glycerin Amount:</strong> <span id="summaryGlycerinAmount" class="calculated-value">0.00</span></p>
        <p><strong>Preservative Amount:</strong> <span id="summaryPreservativeAmount" class="calculated-value">0.0000</span></p>
        <p><strong>Thickener Amount:</strong> <span id="summaryThickenerAmount" class="calculated-value">0.00</span></p>
        <p><strong>Ess./Frag. Oil Amount:</strong> <span id="summaryFragranceAmount" class="calculated-value">0.00</span></p>
        <hr>
        <p class="total-final"><strong>Expected Final Weight of Liquid Soap:</strong> <span id="summaryFinalWeight" class="calculated-value">0.00</span></p>
    </div>

</div>

<div class="disclaimer">
    <h4>Disclaimer</h4>
    <p>This Soap Paste Dilution Calculator by PIPPS Smart Apps is provided for informational and estimation purposes only. The calculations are based on the data you input and standard formulas. PIPPS Smart Apps makes no warranties, express or implied, regarding the accuracy, completeness, reliability, or suitability of this calculator or the information generated by it.</p>
    <p>Users are solely responsible for:
        <ul>
            <li>Verifying all calculations and measurements independently.</li>
            <li>Ensuring the safety and appropriateness of all ingredients used.</li>
            <li>Understanding and adhering to proper soap making, preservation, and cosmetic formulation practices.</li>
            <li>Testing all formulations in small batches before scaling up production or distributing products.</li>
        </ul>
    </p>
    <p>This calculator does not substitute for professional advice from a qualified chemist, cosmetic formulator, or experienced soap maker. PIPPS Smart Apps shall not be liable for any errors, omissions, or for any loss or damage of any kind incurred as a result of the use of this calculator or reliance on any information provided herein. Use at your own risk.</p>
</div>
```

<script>
  let phase1Results = {
      netSoapPaste: 0,
      targetTotalWater: 0,
      targetDilutedSoapWeight: 0,
      initialWaterAdded: 0
  };

  function el(id) { return document.getElementById(id); }
  function val(id) {
      const element = el(id);
      return element ? (parseFloat(element.value) || 0) : 0;
  }
  function setHtml(id, value, decimals = 2) {
      const element = el(id);
      if (element) {
        element.innerHTML = isNaN(value) ? (0).toFixed(decimals) : value.toFixed(decimals);
      }
  }
  function setLabel(id, text) {
      const element = el(id);
      if(element) element.textContent = text;
  }

  document.addEventListener('keydown', function(event) {
    if (event.key === 'Enter' && event.target.tagName === 'INPUT' && 
        (event.target.type === 'number' || event.target.type === 'checkbox')) {
        
        event.preventDefault();

        const phase = event.target.dataset.phase;

        if (phase === '1') {
            calculatePhase1();
        } else if (phase === '2') {
            calculatePhase2();
        }
    }
  });

  function calculatePhase1() {
    const totalWeight = val("totalWeight");
    const containerW = val("containerWeight");

    let netSoapPaste = totalWeight;
    if (containerW > 0 && totalWeight >= containerW) {
        netSoapPaste = totalWeight - containerW;
    }
    if (netSoapPaste < 0) netSoapPaste = 0;


    const soapStrengthPercent = val("soapStrength");
    const soapStrength = soapStrengthPercent > 0 ? soapStrengthPercent / 100 : 0.33;
    const targetTotalWater = netSoapPaste > 0 && soapStrength > 0 ? netSoapPaste * (1 / soapStrength - 1) : 0;
    const addAllWaterChecked = el("addAllWater").checked; 
    const waterPortion = addAllWaterChecked ? 1.0 : 0.8;
    const waterToAddInitially = targetTotalWater * waterPortion;

    setHtml("totalPaste", netSoapPaste);
    setHtml("totalWater", targetTotalWater);
    setHtml("waterToAdd", waterToAddInitially);
    setLabel("waterToAddPercentLabel", addAllWaterChecked ? "(100% of total water)" : "(80% of total water)");

    phase1Results.netSoapPaste = netSoapPaste;
    phase1Results.targetTotalWater = targetTotalWater;
    phase1Results.targetDilutedSoapWeight = netSoapPaste + targetTotalWater;
    phase1Results.initialWaterAdded = waterToAddInitially;

    setHtml("summaryTotalPaste", phase1Results.netSoapPaste);
    setHtml("summaryTotalWater", phase1Results.targetTotalWater);
    setHtml("summaryTargetDilutedSoap", phase1Results.targetDilutedSoapWeight);

    setHtml("postDilTotalPasteWater", 0);
    setHtml("waterToAddPostDil", 0);
    setHtml("glycerinAmount", 0);
    setHtml("preservativeAmount", 0, 4);
    setHtml("thickenerAmount", 0);
    setHtml("fragranceAmount", 0);
    setHtml("summaryGlycerinAmount", 0);
    setHtml("summaryPreservativeAmount", 0, 4);
    setHtml("summaryThickenerAmount", 0);
    setHtml("summaryFragranceAmount", 0);
    setHtml("summaryFinalWeight", 0);
  }

  function calculatePhase2() {
    if (phase1Results.netSoapPaste === 0 && phase1Results.targetTotalWater === 0 && phase1Results.targetDilutedSoapWeight === 0) {
        alert("Please calculate Phase 1 first to determine Net Soap Paste & Target Water values.");
        return;
    }

    const postDilTotalWeight = val("postDilTotalWeight");
    const postDilContainerWeight = val("postDilContainerWeight");
    const actualMeasuredDilutedSoap = postDilTotalWeight - postDilContainerWeight;
    setHtml("postDilTotalPasteWater", actualMeasuredDilutedSoap);

    const safeNetSoapPaste = Math.max(0, phase1Results.netSoapPaste);
    const waterCurrentlyInBatch = actualMeasuredDilutedSoap - safeNetSoapPaste;

    let waterToAddPostDil = phase1Results.targetTotalWater - waterCurrentlyInBatch;
    if (waterToAddPostDil < 0) waterToAddPostDil = 0;
    setHtml("waterToAddPostDil", waterToAddPostDil);

    const baseForAdditives = phase1Results.targetDilutedSoapWeight;

    const glycerinPercent = val("glycerinPercent") / 100;
    const preservativePercent = val("preservativePercent") / 100;
    const thickenerPercent = val("thickenerPercent") / 100;
    const fragrancePercent = val("fragrancePercent") / 100;

    const glycerinAmount = baseForAdditives * glycerinPercent;
    const preservativeAmount = baseForAdditives * preservativePercent;
    const thickenerAmount = baseForAdditives * thickenerPercent;
    const fragranceAmount = baseForAdditives * fragrancePercent;

    setHtml("glycerinAmount", glycerinAmount);
    setHtml("preservativeAmount", preservativeAmount, 4);
    setHtml("thickenerAmount", thickenerAmount);
    setHtml("fragranceAmount", fragranceAmount);

    setHtml("summaryGlycerinAmount", glycerinAmount);
    setHtml("summaryPreservativeAmount", preservativeAmount, 4);
    setHtml("summaryThickenerAmount", thickenerAmount);
    setHtml("summaryFragranceAmount", fragranceAmount);

    const finalProductWeight = baseForAdditives + glycerinAmount + preservativeAmount + thickenerAmount + fragranceAmount;
    setHtml("summaryFinalWeight", finalProductWeight);
  }

  function resetForm() {
    el("totalWeight").value = "0";
    el("containerWeight").value = "0";
    el("soapStrength").value = "33";
    el("addAllWater").checked = false;
    setLabel("waterToAddPercentLabel", "(80% of total water)");

    setHtml("totalPaste", 0);
    setHtml("totalWater", 0);
    setHtml("waterToAdd", 0);

    el("postDilTotalWeight").value = "0";
    el("postDilContainerWeight").value = "0";
    el("glycerinPercent").value = "0.53";
    el("preservativePercent").value = "0.0075";
    el("thickenerPercent").value = "0.75";
    el("fragrancePercent").value = "1";

    setHtml("postDilTotalPasteWater", 0);
    setHtml("waterToAddPostDil", 0);
    setHtml("glycerinAmount", 0);
    setHtml("preservativeAmount", 0, 4);
    setHtml("thickenerAmount", 0);
    setHtml("fragranceAmount", 0);

    phase1Results = {
        netSoapPaste: 0,
        targetTotalWater: 0,
        targetDilutedSoapWeight: 0,
        initialWaterAdded: 0
    };

    setHtml("summaryTotalPaste", 0);
    setHtml("summaryTotalWater", 0);
    setHtml("summaryTargetDilutedSoap", 0);
    setHtml("summaryGlycerinAmount", 0);
    setHtml("summaryPreservativeAmount", 0, 4);
    setHtml("summaryThickenerAmount", 0);
    setHtml("summaryFragranceAmount", 0);
    setHtml("summaryFinalWeight", 0);
  }

  window.onload = () => {
      resetForm();
  };
</script>


<footer style="margin-top:40px; padding:20px; text-align:center; font-size:0.9em; background:#f0f0f0; border-top:1px solid #ccc;">
    <p><strong>Need more tools?</strong> Visit <a href="https://pipps.app" target="_blank" style="color:#2c3e50; text-decoration:underline;">pipps.app</a> for free calculators, AI eBooks, and smart business tools.</p>
    <p style="color:#666;">&copy; 2025 PIPPS Smart Apps · Built by <a href="https://pipps.app" target="_blank" style="color:#666;">JCEpiphany</a></p>
</footer>

</body>
</html>
